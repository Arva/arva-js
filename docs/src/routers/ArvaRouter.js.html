<!DOCTYPE html>
<html>
<head>
  <title>ArvaRouter.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../", thisFile = "Users/mysim1/Development/Projects/arva-mvc/src/routers/ArvaRouterjs", defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>ArvaRouter.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>This Source Code is licensed under the MIT license. If a copy of the
MIT-license was not distributed with this file, You can obtain one at:
<a href='http://opensource.org/licenses/mit-license.html'>http://opensource.org/licenses/mit-license.html</a>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">author:</div>
    <div class="dox_tag_detail">
      <span>Hans van den Akker (mysim1)</span>
    </div>
    <div class="dox_tag_title">license</div>
    <div class="dox_tag_detail">
      <span>MIT</span>
    </div>
    <div class="dox_tag_title">copyright</div>
    <div class="dox_tag_detail">
      <span>Bizboard, 2015</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="kr">import</span> <span class="nx">_</span>                            <span class="nx">from</span> <span class="s1">&#39;lodash&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Provide</span><span class="p">}</span>                    <span class="nx">from</span> <span class="s1">&#39;di.js&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Easing</span>                       <span class="nx">from</span> <span class="s1">&#39;famous/transitions/Easing&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">AnimationController</span>          <span class="nx">from</span> <span class="s1">&#39;famous-flex/src/AnimationController&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">Router</span><span class="p">}</span>                      <span class="nx">from</span> <span class="s1">&#39;../core/Router&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Provide</span><span class="p">(</span><span class="nx">Router</span><span class="p">)</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">ArvaRouter</span> <span class="kr">extends</span> <span class="nx">Router</span> <span class="p">{</span>

    <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">super</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">window</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">routes</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">history</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">decode</span> <span class="o">=</span> <span class="nb">decodeURIComponent</span><span class="p">;</span>

        <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;hashchange&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">run</span><span class="p">);</span>

    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set the initial controller and method to be activated whenever the controllers are activated.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">controller</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">method
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">setDefault</span><span class="p">(</span><span class="nx">controller</span><span class="p">,</span> <span class="nx">method</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">defaultController</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getControllerName</span><span class="p">(</span><span class="nx">controller</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">method</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">defaultMethod</span> <span class="o">=</span> <span class="nx">method</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">setControllerSpecs</span><span class="p">(</span><span class="nx">specs</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">specs</span> <span class="o">=</span> <span class="nx">specs</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Force navigation to one of the controllers</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">controller</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">method</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">params
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">go</span><span class="p">(</span><span class="nx">controller</span><span class="p">,</span> <span class="nx">method</span><span class="p">,</span> <span class="nx">params</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">let</span> <span class="nx">controllerName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getControllerName</span><span class="p">(</span><span class="nx">controller</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">routeRoot</span> <span class="o">=</span> <span class="nx">controllerName</span>
            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultController</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;Controller&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

        <span class="kd">let</span> <span class="nx">hash</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">routeRoot</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">routeRoot</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">method</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">params</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">params</span><span class="p">)[</span><span class="nx">i</span><span class="p">];</span>
                <span class="nx">hash</span> <span class="o">+=</span> <span class="nx">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="s1">&#39;?&#39;</span> <span class="o">:</span> <span class="s1">&#39;&amp;&#39;</span><span class="p">;</span>
                <span class="nx">hash</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">key</span> <span class="o">+</span> <span class="s1">&#39;=&#39;</span> <span class="o">+</span> <span class="nx">params</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">history</span><span class="p">.</span><span class="nx">pushState</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">history</span><span class="p">.</span><span class="nx">pushState</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">hash</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
    <span class="p">}</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Register a single controller</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">route</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">handler
</span>
      <span class="dox_type">Function</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">add</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span> <span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">pieces</span> <span class="o">=</span> <span class="nx">route</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">),</span>
            <span class="nx">rules</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">routes</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">pieces</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">piece</span> <span class="o">=</span> <span class="nx">pieces</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
                <span class="nx">name</span> <span class="o">=</span> <span class="nx">piece</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;:&#39;</span> <span class="o">?</span> <span class="s1">&#39;:&#39;</span> <span class="o">:</span> <span class="nx">piece</span><span class="p">;</span>

            <span class="nx">rules</span> <span class="o">=</span> <span class="nx">rules</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">rules</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{});</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">rules</span><span class="p">[</span><span class="s1">&#39;@name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">piece</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">rules</span><span class="p">[</span><span class="s1">&#39;@&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">;</span>

    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>On a route change, call the corresponding controller method with the given parameter values.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">boolean
</span>
      <span>{boolean}</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">run</span><span class="p">()</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<p>if (!url || typeof(url) == 'object')</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span> <span class="c1">// || &#39;#&#39;;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">url</span> <span class="o">!==</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;/?&#39;</span><span class="p">,</span> <span class="s1">&#39;?&#39;</span><span class="p">);</span>
            <span class="nx">url</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;/&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
            <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;/&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="kd">let</span> <span class="nx">rules</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">routes</span><span class="p">,</span>
            <span class="nx">querySplit</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">),</span>
            <span class="nx">pieces</span> <span class="o">=</span> <span class="nx">querySplit</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">),</span>
            <span class="nx">values</span> <span class="o">=</span> <span class="p">[],</span>
            <span class="nx">keys</span> <span class="o">=</span> <span class="p">[],</span>
            <span class="nx">method</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">rule</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">controller</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7">&#182;</a>
</div>
<p>if there is no controller reference, assume we have hit the default Controller</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="nx">pieces</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">pieces</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">pieces</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">defaultController</span><span class="p">;</span>
            <span class="nx">pieces</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultMethod</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">pieces</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">pieces</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">pieces</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultController</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">controller</span> <span class="o">=</span> <span class="nx">pieces</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8">&#182;</a>
</div>
<p>Parse the non-query portion of the URL...</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">pieces</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">rules</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">piece</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">decode</span><span class="p">(</span><span class="nx">pieces</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
            <span class="nx">rule</span> <span class="o">=</span> <span class="nx">rules</span><span class="p">[</span><span class="nx">piece</span><span class="p">];</span>

            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">rule</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">rules</span><span class="p">[</span><span class="s1">&#39;:&#39;</span><span class="p">]))</span> <span class="p">{</span>
                <span class="nx">method</span> <span class="o">=</span> <span class="nx">piece</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nx">rules</span> <span class="o">=</span> <span class="nx">rules</span><span class="p">[</span><span class="nx">piece</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="p">(</span><span class="kd">function</span> <span class="nx">parseQuery</span><span class="p">(</span><span class="nx">q</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">q</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">);</span>

            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">query</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">nameValue</span> <span class="o">=</span> <span class="nx">query</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">nameValue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">nameValue</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
                    <span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">decode</span><span class="p">(</span><span class="nx">nameValue</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">querySplit</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">querySplit</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">rule</span> <span class="o">&amp;&amp;</span> <span class="nx">rule</span><span class="p">[</span><span class="s1">&#39;@&#39;</span><span class="p">])</span> <span class="p">{</span>

            <span class="cm">/* Push current route to the history stack for later use */</span>
            <span class="kd">let</span> <span class="nx">previousRoute</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">history</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
            <span class="kd">let</span> <span class="nx">currentRoute</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span><span class="p">,</span>
                <span class="nx">controller</span><span class="o">:</span> <span class="nx">controller</span><span class="p">,</span>
                <span class="nx">method</span><span class="o">:</span> <span class="nx">method</span><span class="p">,</span>
                <span class="nx">keys</span><span class="o">:</span> <span class="nx">keys</span><span class="p">,</span>
                <span class="nx">values</span><span class="o">:</span> <span class="nx">values</span>
            <span class="p">};</span>
            <span class="nx">currentRoute</span><span class="p">.</span><span class="nx">spec</span> <span class="o">=</span> <span class="nx">previousRoute</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getAnimationSpec</span><span class="p">(</span><span class="nx">previousRoute</span><span class="p">,</span> <span class="nx">currentRoute</span><span class="p">)</span> <span class="o">:</span> <span class="p">{};</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_setHistory</span><span class="p">(</span><span class="nx">currentRoute</span><span class="p">);</span>

            <span class="k">this</span><span class="p">.</span><span class="nx">_executeRoute</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="nx">currentRoute</span><span class="p">);</span>

            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Controller doesn\&#39;t exist!&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute the controller rule associated with a given route, passing the route as a parameter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">rule</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">route</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">private
</div>


<div class="highlight"><pre><code><span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;dox_tag_detail&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>



<p></div>
</div></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">_executeRoute</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="nx">route</span><span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* Make the controller active for current scope */</span>
        <span class="nx">rule</span><span class="p">[</span><span class="s1">&#39;@&#39;</span><span class="p">](</span><span class="nx">route</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;routechange&#39;</span><span class="p">,</span> <span class="nx">route</span><span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Checks if the current route is already present in the history stack, and if so removes all entries after
and including the first occurrence. It will then append the current route to the history stack.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">currentRoute</span>
      <span>Route object containing url, controller, method, keys, and values.</span>
    </div>
    <div class="dox_tag_title">private
</div>


<div class="highlight"><pre><code><span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;dox_tag_detail&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>



<p></div>
</div></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">_setHistory</span><span class="p">(</span><span class="nx">currentRoute</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">previousRoute</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">history</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">currentRoute</span><span class="p">.</span><span class="nx">controller</span> <span class="o">===</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">controller</span> <span class="o">&amp;&amp;</span>
                <span class="nx">currentRoute</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">method</span> <span class="o">&amp;&amp;</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">currentRoute</span><span class="p">.</span><span class="nx">values</span><span class="p">,</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">values</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">i</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">currentRoute</span><span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Method to check whether a route is already present in the history stack.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">currentRoute</span>
      <span>Route object containing url, controller, method, keys, and values.</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">boolean</span>
    </div>
    <div class="dox_tag_title">private
</div>


<div class="highlight"><pre><code><span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;dox_tag_detail&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>



<p></div>
</div></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">_hasVisited</span><span class="p">(</span><span class="nx">currentRoute</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">previousRoute</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">history</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">currentRoute</span><span class="p">.</span><span class="nx">controller</span> <span class="o">===</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">controller</span> <span class="o">&amp;&amp;</span>
                <span class="nx">currentRoute</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">method</span> <span class="o">&amp;&amp;</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">currentRoute</span><span class="p">.</span><span class="nx">values</span><span class="p">,</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">values</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Returns the Famous-Flex animation spec for two given routes. Takes its spec inputs from the specs set in
router.setControllerSpecs(), which is called from the app constructor.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">previousRoute</span>
      <span>Previous route object containing url, controller, method, keys, and values.</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">currentRoute</span>
      <span>Current route object containing url, controller, method, keys, and values.</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">*</span>
      <span>A spec object if one is found, or an empty object otherwise.</span>
    </div>
    <div class="dox_tag_title">private
</div>


<div class="highlight"><pre><code><span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;dox_tag_detail&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>



<p></div>
</div></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">_getAnimationSpec</span><span class="p">(</span><span class="nx">previousRoute</span><span class="p">,</span> <span class="nx">currentRoute</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">fromController</span> <span class="o">=</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">controller</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">toController</span> <span class="o">=</span> <span class="nx">currentRoute</span><span class="p">.</span><span class="nx">controller</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">fromController</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;Controller&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">fromController</span> <span class="o">+=</span> <span class="s1">&#39;Controller&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">toController</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;Controller&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">toController</span> <span class="o">+=</span> <span class="s1">&#39;Controller&#39;</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="cm">/* We&#39;re on exactly the same page as before */</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">currentRoute</span><span class="p">.</span><span class="nx">controller</span> <span class="o">===</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">controller</span> <span class="o">&amp;&amp;</span>
            <span class="nx">currentRoute</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">method</span> <span class="o">&amp;&amp;</span>
            <span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">currentRoute</span><span class="p">.</span><span class="nx">values</span><span class="p">,</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">values</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">{};</span>
        <span class="p">}</span>

        <span class="cm">/* Same controller, different method or different parameters */</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">currentRoute</span><span class="p">.</span><span class="nx">controller</span> <span class="o">===</span> <span class="nx">previousRoute</span><span class="p">.</span><span class="nx">controller</span><span class="p">)</span> <span class="p">{</span>

            <span class="kd">let</span> <span class="nx">direction</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_hasVisited</span><span class="p">(</span><span class="nx">currentRoute</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;previous&#39;</span> <span class="o">:</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">specs</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">specs</span><span class="p">[</span><span class="nx">fromController</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">specs</span><span class="p">[</span><span class="nx">fromController</span><span class="p">].</span><span class="nx">methods</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">specs</span><span class="p">[</span><span class="nx">fromController</span><span class="p">].</span><span class="nx">methods</span><span class="p">[</span><span class="nx">direction</span><span class="p">];</span>
            <span class="p">}</span>

            <span class="cm">/* Default method-to-method animations, used only if not overridden in app&#39;s controllers spec. */</span>
            <span class="kd">let</span> <span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;previous&#39;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">transition</span><span class="o">:</span> <span class="p">{</span><span class="nx">duration</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="nx">curve</span><span class="o">:</span> <span class="nx">Easing</span><span class="p">.</span><span class="nx">outBack</span><span class="p">},</span>
                    <span class="nx">animation</span><span class="o">:</span> <span class="nx">AnimationController</span><span class="p">.</span><span class="nx">Animation</span><span class="p">.</span><span class="nx">Slide</span><span class="p">.</span><span class="nx">Right</span>
                <span class="p">},</span>
                <span class="s1">&#39;next&#39;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">transition</span><span class="o">:</span> <span class="p">{</span><span class="nx">duration</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="nx">curve</span><span class="o">:</span> <span class="nx">Easing</span><span class="p">.</span><span class="nx">outBack</span><span class="p">},</span>
                    <span class="nx">animation</span><span class="o">:</span> <span class="nx">AnimationController</span><span class="p">.</span><span class="nx">Animation</span><span class="p">.</span><span class="nx">Slide</span><span class="p">.</span><span class="nx">Left</span>
                <span class="p">}</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="nx">defaults</span><span class="p">[</span><span class="nx">direction</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="cm">/* Different controller */</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">specs</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">specs</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">toController</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">specs</span><span class="p">[</span><span class="nx">toController</span><span class="p">].</span><span class="nx">controllers</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">controllerSpecs</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">specs</span><span class="p">[</span><span class="nx">toController</span><span class="p">].</span><span class="nx">controllers</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">specIndex</span> <span class="k">in</span> <span class="nx">controllerSpecs</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="nx">spec</span> <span class="o">=</span> <span class="nx">controllerSpecs</span><span class="p">[</span><span class="nx">specIndex</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">spec</span><span class="p">.</span><span class="nx">activeFrom</span> <span class="o">&amp;&amp;</span> <span class="nx">spec</span><span class="p">.</span><span class="nx">activeFrom</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">fromController</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">spec</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;No spec defined from &#39;</span> <span class="o">+</span> <span class="nx">fromController</span> <span class="o">+</span> <span class="s1">&#39; to &#39;</span> <span class="o">+</span> <span class="nx">toController</span> <span class="o">+</span> <span class="s1">&#39;. Please check router.setControllerSpecs() in your app constructor.&#39;</span><span class="p">)</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Extract a controller name from a given string, constructor, or controller instance.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">controller</span>
      <span class="dox_type">Function</span>
      <span class="dox_type">Object</span>
      <span class="dox_type">String</span>
      <span>String, constructor, or controller instance.</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">private
</div>


<div class="highlight"><pre><code><span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;dox_tag_detail&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="err">/div&gt;</span>
</code></pre></div>



<p></div>
</div></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">_getControllerName</span><span class="p">(</span><span class="nx">controller</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">controller</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;Controller&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">controller</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">controller</span><span class="p">).</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="s2">&quot;Function&quot;</span><span class="p">){</span>
            <span class="k">return</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;Controller&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span><span class="p">{</span>
            <span class="k">return</span> <span class="k">typeof</span> <span class="nx">controller</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">?</span>
                             <span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">controller</span><span class="p">).</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;Controller&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">controller</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
